# Copyright 2023 Nokia
# Licensed under the BSD 3-Clause License.
# SPDX-License-Identifier: BSD-3-Clause

name: sros-telemetry
prefix: ""

mgmt:
  network: sros-telemetry
  ipv4-subnet: 172.81.0.0/24

topology:
  kinds:
    vr-sros:
      image: europe-west1-docker.pkg.dev/nhc-f4160d67/containerlab/vr-sros:23.3.R1
      type: sr-1
      license: /opt/srexperts/license-sros23.txt
    linux:
      image: ghcr.io/hellt/network-multitool
  nodes:
  # Ps
    P1:
      kind: vr-sros
      mgmt-ipv4: 172.81.0.11
      startup-config: configs/p1.partial.config
    P2:
      kind: vr-sros
      mgmt-ipv4: 172.81.0.12
      startup-config: configs/p2.partial.config

    # PEs
    PE1:
      kind: vr-sros
      mgmt-ipv4: 172.81.0.21
      startup-config: configs/pe1.partial.config
    PE2:
      kind: vr-sros
      mgmt-ipv4: 172.81.0.22
      startup-config: configs/pe2.partial.config

    # Clients
    client1:
      kind: linux
      mgmt-ipv4: 172.81.0.31
      binds:
        - configs/client1:/config
      exec:
        - ip address add 172.17.0.1/24 dev eth1
        - ip -6 address add 2002::172:17:0:1/96 dev eth1
      group: server
    client2:
      kind: linux
      mgmt-ipv4: 172.81.0.32
      binds:
        - configs/client2:/config
      exec:
        - ip address add 172.17.0.2/24 dev eth1
        - ip -6 address add 2002::172:17:0:2/96 dev eth1
      group: server

